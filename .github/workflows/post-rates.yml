name: Post USD & Market Rates to Telegram (Forouzanfar)

on:
  schedule:
    # ุงุฌุฑุง 3 ุจุงุฑ ุฏุฑ ุฑูุฒ (UTC): 06:00, 12:00, 18:00
    # ูุนุงุฏู ุญุฏูุฏุงู ุชูุฑุงู: 09:30ุ 15:30ุ 21:30
    - cron: '0 6,12,18 * * *'
  workflow_dispatch:

jobs:
  post:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install deps
        run: pip install requests

      - name: Run poster
        env:
          # --- Secrets (ุจุงุฏ ูุจูุงู ุฏุฑ Settings > Secrets ุณุงุฎุชู ุดููุฏ) ---
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          NAVASAN_API_KEY: ${{ secrets.NAVASAN_API_KEY }}

          # --- ุชูุธูุงุช ูพุงู (ุฏูุฎูุงู) ---
          TELEGRAM_CHANNEL: '@Foorouzanfar'
          TIMEZONE: 'Asia/Tehran'
          MESSAGE_HEADER: '๐ฃ ุตุฑุงู ูุฑูุฒุงููุฑ โ ุจุฑูุฒุฑุณุงู ูุฑุฎโูุง'
          SOURCE_LABEL: 'ููุณุงู'
          HASHTAGS: '#ุฏูุงุฑ #ูุฑู #ุณฺฉู #ุทูุง #ุญูุงูู #ุตุฑุงู_ูุฑูุฒุงููุฑ'
          CHANNEL_HANDLE: '@Foorouzanfar'

          # ุฏุณุชูโูุง: cash = ุงุณฺฉูุงุณ ููุฏุ remittance = ุญูุงููุ
          # melli = ุตุฑุงู ููุ goldcoin = ุณฺฉู/ุทูุงุ crypto = ุฑูุฒุงุฑุฒ
          INCLUDE_CATEGORIES: 'cash,remittance,melli,goldcoin,crypto'

          # ุงฺฏุฑ ุจุฎูุงู ููุท ููุช ุชุบุฑ ุฏูุงุฑ ูุฑูุด ุชูุฑุงู ุฒุงุฏ ุจูุฏ ูพุณุช ุจุฏู:
          # ููุฏุงุฑ ุฑุง ุจู ุชููุงู ุจฺฏุฐุงุฑ (ูุซูุง '300'). ุตูุฑ ุนู ููุดู ุงุฑุณุงู.
          MIN_CHANGE_TOMAN: '0'
        run: python rates_cron.py
